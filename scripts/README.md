# arken/packages/evolution/scripts

Wrapper-level tooling for `arken/packages/evolution`.

## Current utilities
- `validateSubmoduleMap.mjs`: validates required non-client `.gitmodules` paths, verifies required mappings also exist as HEAD gitlinks, normalizes quoted/path-variant entries (single/double quotes, repeated/embedded `./` segments, duplicate slashes, trailing slash, backslashes) for both mapping and gitlink inputs, accepts case-insensitive `path` keys (`path`/`Path`/`PATH`) for git-config compatibility, accepts section-header variants (`[submodule ...]`) with mixed case/extra spacing and trailing comments, tolerates inline path comments (`#`/`;`) with quote-aware parsing (so comment markers inside quoted paths are preserved), preserves escaped inline-comment markers (`\#`, `\;`) in path values, strips an optional UTF-8 BOM prefix from `.gitmodules` content before parsing section headers, rejects invalid empty/comment-only path entries (including explicit `path =` blank and quoted-empty assignments), rejects unsafe path mappings (`..` traversal segments, absolute paths like `/...` or `C:/...`, and URL-like schemes such as `https://...` / `ssh://...`), reports submodule-owner sections that never declare a `path` mapping, reports owners that only declare invalid path lines (no valid normalized path), reports duplicate path mappings across different owners (while tolerating repeated identical owner/path lines and deduplicating repeated duplicate-owner entries), aggregates repeated conflicting re-maps for the same submodule owner into one deterministic conflict record, de-duplicates/sorts unexpected unmapped gitlinks after normalization, reports mapped paths that no longer resolve to `HEAD` gitlinks, detects duplicate normalized gitlink paths after canonicalization, rejects invalid empty/whitespace gitlink inputs, allows temporary `packages/client` skip policy, rejects invalid required/ignored overlap, rejects invalid validator config entries where required/ignored path lists include empty values, unsafe path values, or duplicate normalized paths, and surfaces all invalid/unsafe mapping failures under a single CLI heading (`Invalid .gitmodules path mappings`).
